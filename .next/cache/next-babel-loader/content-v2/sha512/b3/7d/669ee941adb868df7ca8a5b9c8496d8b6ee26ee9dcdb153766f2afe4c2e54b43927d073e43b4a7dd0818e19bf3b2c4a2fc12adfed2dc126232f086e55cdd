{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/ryan/Documents/Project/feedloop-template/qoreXM/pages/login.tsx\";\nimport React from \"react\";\nimport Cookies from \"js-cookie\";\nimport { css } from \"@emotion/css\";\nimport { Button, Card, Form, Input, message, Space, Typography } from \"antd\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { useRouter } from \"next/router\";\nimport { client } from \"../qoreContext\";\nimport Link from \"next/link\";\nexport default function Login() {\n  const form = useForm({\n    defaultValues: {\n      email: \"\",\n      password: \"\"\n    },\n    mode: \"onChange\"\n  });\n  const [state, setState] = React.useState({\n    status: \"idle\"\n  });\n  const router = useRouter();\n  const handleSubmit = React.useCallback(async e => {\n    const values = form.getValues();\n    setState({\n      status: \"loading\"\n    });\n\n    try {\n      const token = await client.authenticate(values.email, values.password);\n      Cookies.set(\"token\", token, {\n        path: \"/\"\n      });\n      setState({\n        status: \"success\"\n      });\n      message.success(\"Logged in\");\n      router.push(\"/\", \"/\");\n    } catch (error) {\n      setState({\n        status: \"error\",\n        error\n      });\n      message.error(error.message);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: css`\n        margin: 100px auto;\n        width: 320px;\n      `,\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n        level: 4,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        layout: \"vertical\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Email\",\n          children: /*#__PURE__*/_jsxDEV(Controller, {\n            name: \"email\",\n            control: form.control,\n            rules: {\n              required: true\n            },\n            render: ({\n              value,\n              onChange\n            }) => /*#__PURE__*/_jsxDEV(Input, {\n              onChange: onChange,\n              placeholder: \"Email here\",\n              value: value\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Password\",\n          children: /*#__PURE__*/_jsxDEV(Controller, {\n            name: \"password\",\n            control: form.control,\n            rules: {\n              required: true\n            },\n            render: ({\n              value,\n              onChange\n            }) => /*#__PURE__*/_jsxDEV(Input, {\n              onChange: onChange,\n              type: \"password\",\n              placeholder: \"Password here\",\n              value: value\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            disabled: !form.formState.isValid || state.status === \"loading\",\n            onClick: handleSubmit,\n            type: \"primary\",\n            children: state.status === \"loading\" ? \"Logging in..\" : \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/register\",\n            as: \"/register\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"link\",\n              children: \"Register\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/ryan/Documents/Project/feedloop-template/qoreXM/pages/login.tsx"],"names":["React","Cookies","css","Button","Card","Form","Input","message","Space","Typography","Controller","useForm","useRouter","client","Link","Login","form","defaultValues","email","password","mode","state","setState","useState","status","router","handleSubmit","useCallback","e","values","getValues","token","authenticate","set","path","success","push","error","control","required","value","onChange","formState","isValid"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,GAAT,QAAoB,cAApB;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,IAAvB,EAA6BC,KAA7B,EAAoCC,OAApC,EAA6CC,KAA7C,EAAoDC,UAApD,QAAsE,MAAtE;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,iBAApC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,MAAT,QAAuB,gBAAvB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,eAAe,SAASC,KAAT,GAAiB;AAC9B,QAAMC,IAAI,GAAGL,OAAO,CAAsC;AACxDM,IAAAA,aAAa,EAAE;AAAEC,MAAAA,KAAK,EAAE,EAAT;AAAaC,MAAAA,QAAQ,EAAE;AAAvB,KADyC;AAExDC,IAAAA,IAAI,EAAE;AAFkD,GAAtC,CAApB;AAIA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBtB,KAAK,CAACuB,QAAN,CAGvB;AAAEC,IAAAA,MAAM,EAAE;AAAV,GAHuB,CAA1B;AAIA,QAAMC,MAAM,GAAGb,SAAS,EAAxB;AACA,QAAMc,YAAY,GAAG1B,KAAK,CAAC2B,WAAN,CACnB,MAAOC,CAAP,IAAkD;AAChD,UAAMC,MAAM,GAAGb,IAAI,CAACc,SAAL,EAAf;AACAR,IAAAA,QAAQ,CAAC;AAAEE,MAAAA,MAAM,EAAE;AAAV,KAAD,CAAR;;AACA,QAAI;AACF,YAAMO,KAAK,GAAG,MAAMlB,MAAM,CAACmB,YAAP,CAAoBH,MAAM,CAACX,KAA3B,EAAkCW,MAAM,CAACV,QAAzC,CAApB;AACAlB,MAAAA,OAAO,CAACgC,GAAR,CAAY,OAAZ,EAAqBF,KAArB,EAA4B;AAAEG,QAAAA,IAAI,EAAE;AAAR,OAA5B;AACAZ,MAAAA,QAAQ,CAAC;AAAEE,QAAAA,MAAM,EAAE;AAAV,OAAD,CAAR;AACAjB,MAAAA,OAAO,CAAC4B,OAAR,CAAgB,WAAhB;AACAV,MAAAA,MAAM,CAACW,IAAP,CAAY,GAAZ,EAAiB,GAAjB;AACD,KAND,CAME,OAAOC,KAAP,EAAc;AACdf,MAAAA,QAAQ,CAAC;AAAEE,QAAAA,MAAM,EAAE,OAAV;AAAmBa,QAAAA;AAAnB,OAAD,CAAR;AACA9B,MAAAA,OAAO,CAAC8B,KAAR,CAAcA,KAAK,CAAC9B,OAApB;AACD;AACF,GAdkB,EAenB,EAfmB,CAArB;AAiBA,sBACE;AACE,IAAA,SAAS,EAAEL,GAAI;AACrB;AACA;AACA,OAJI;AAAA,2BAME,QAAC,IAAD;AAAA,8BACE,QAAC,UAAD,CAAY,KAAZ;AAAkB,QAAA,KAAK,EAAE,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,IAAD;AAAM,QAAA,MAAM,EAAC,UAAb;AAAA,gCACE,QAAC,IAAD,CAAM,IAAN;AAAW,UAAA,KAAK,EAAC,OAAjB;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,IAAI,EAAC,OADP;AAEE,YAAA,OAAO,EAAEc,IAAI,CAACsB,OAFhB;AAGE,YAAA,KAAK,EAAE;AAAEC,cAAAA,QAAQ,EAAE;AAAZ,aAHT;AAIE,YAAA,MAAM,EAAE,CAAC;AAAEC,cAAAA,KAAF;AAASC,cAAAA;AAAT,aAAD,kBACN,QAAC,KAAD;AACE,cAAA,QAAQ,EAAEA,QADZ;AAEE,cAAA,WAAW,EAAC,YAFd;AAGE,cAAA,KAAK,EAAED;AAHT;AAAA;AAAA;AAAA;AAAA;AALJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAeE,QAAC,IAAD,CAAM,IAAN;AAAW,UAAA,KAAK,EAAC,UAAjB;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,IAAI,EAAC,UADP;AAEE,YAAA,OAAO,EAAExB,IAAI,CAACsB,OAFhB;AAGE,YAAA,KAAK,EAAE;AAAEC,cAAAA,QAAQ,EAAE;AAAZ,aAHT;AAIE,YAAA,MAAM,EAAE,CAAC;AAAEC,cAAAA,KAAF;AAASC,cAAAA;AAAT,aAAD,kBACN,QAAC,KAAD;AACE,cAAA,QAAQ,EAAEA,QADZ;AAEE,cAAA,IAAI,EAAC,UAFP;AAGE,cAAA,WAAW,EAAC,eAHd;AAIE,cAAA,KAAK,EAAED;AAJT;AAAA;AAAA;AAAA;AAAA;AALJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAfF;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAiCE,QAAC,IAAD,CAAM,IAAN;AAAA,+BACE,QAAC,KAAD;AAAA,kCACE,QAAC,MAAD;AACE,YAAA,QAAQ,EAAE,CAACxB,IAAI,CAAC0B,SAAL,CAAeC,OAAhB,IAA2BtB,KAAK,CAACG,MAAN,KAAiB,SADxD;AAEE,YAAA,OAAO,EAAEE,YAFX;AAGE,YAAA,IAAI,EAAC,SAHP;AAAA,sBAKGL,KAAK,CAACG,MAAN,KAAiB,SAAjB,GAA6B,cAA7B,GAA8C;AALjD;AAAA;AAAA;AAAA;AAAA,kBADF,eAQE,QAAC,IAAD;AAAM,YAAA,IAAI,EAAC,WAAX;AAAuB,YAAA,EAAE,EAAC,WAA1B;AAAA,mCACE,QAAC,MAAD;AAAQ,cAAA,IAAI,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBARF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAjCF;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,UADF;AAyDD","sourcesContent":["import React from \"react\";\nimport Cookies from \"js-cookie\";\nimport { css } from \"@emotion/css\";\nimport { Button, Card, Form, Input, message, Space, Typography } from \"antd\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { useRouter } from \"next/router\";\nimport { client } from \"../qoreContext\";\nimport Link from \"next/link\";\n\nexport default function Login() {\n  const form = useForm<{ email: string; password: string }>({\n    defaultValues: { email: \"\", password: \"\" },\n    mode: \"onChange\",\n  });\n  const [state, setState] = React.useState<{\n    status: \"idle\" | \"loading\" | \"success\" | \"error\";\n    error?: Error;\n  }>({ status: \"idle\" });\n  const router = useRouter();\n  const handleSubmit = React.useCallback(\n    async (e: React.MouseEvent<HTMLButtonElement>) => {\n      const values = form.getValues();\n      setState({ status: \"loading\" });\n      try {\n        const token = await client.authenticate(values.email, values.password);\n        Cookies.set(\"token\", token, { path: \"/\" });\n        setState({ status: \"success\" });\n        message.success(\"Logged in\");\n        router.push(\"/\", \"/\");\n      } catch (error) {\n        setState({ status: \"error\", error });\n        message.error(error.message);\n      }\n    },\n    []\n  );\n  return (\n    <div\n      className={css`\n        margin: 100px auto;\n        width: 320px;\n      `}\n    >\n      <Card>\n        <Typography.Title level={4}>Login</Typography.Title>\n        <Form layout=\"vertical\">\n          <Form.Item label=\"Email\">\n            <Controller\n              name=\"email\"\n              control={form.control}\n              rules={{ required: true }}\n              render={({ value, onChange }) => (\n                <Input\n                  onChange={onChange}\n                  placeholder=\"Email here\"\n                  value={value}\n                />\n              )}\n            />\n          </Form.Item>\n          <Form.Item label=\"Password\">\n            <Controller\n              name=\"password\"\n              control={form.control}\n              rules={{ required: true }}\n              render={({ value, onChange }) => (\n                <Input\n                  onChange={onChange}\n                  type=\"password\"\n                  placeholder=\"Password here\"\n                  value={value}\n                />\n              )}\n            />\n          </Form.Item>\n        </Form>\n        <Form.Item>\n          <Space>\n            <Button\n              disabled={!form.formState.isValid || state.status === \"loading\"}\n              onClick={handleSubmit}\n              type=\"primary\"\n            >\n              {state.status === \"loading\" ? \"Logging in..\" : \"Login\"}\n            </Button>\n            <Link href=\"/register\" as=\"/register\">\n              <Button type=\"link\">Register</Button>\n            </Link>\n          </Space>\n        </Form.Item>\n      </Card>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}