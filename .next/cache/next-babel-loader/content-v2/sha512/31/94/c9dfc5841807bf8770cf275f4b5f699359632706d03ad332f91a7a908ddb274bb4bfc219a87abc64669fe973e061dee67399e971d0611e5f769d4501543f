{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/ryan/Documents/Project/feedloop-template/qoreXM/pages/login.tsx\",\n    _s = $RefreshSig$();\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n        margin: 100px auto;\\n        width: 320px;\\n      \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport Cookies from \"js-cookie\";\nimport { css } from \"@emotion/css\";\nimport { Button, Card, Form, Input, message, Space, Typography } from \"antd\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { useRouter } from \"next/router\";\nimport { client } from \"../qoreContext\";\nimport Link from \"next/link\";\nexport default function Login() {\n  _s();\n\n  var _this = this;\n\n  var form = useForm({\n    defaultValues: {\n      email: \"\",\n      password: \"\"\n    },\n    mode: \"onChange\"\n  });\n\n  var _React$useState = React.useState({\n    status: \"idle\"\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      state = _React$useState2[0],\n      setState = _React$useState2[1];\n\n  var router = useRouter();\n  var handleSubmit = React.useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var values, token;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              values = form.getValues();\n              setState({\n                status: \"loading\"\n              });\n              _context.prev = 2;\n              _context.next = 5;\n              return client.authenticate(values.email, values.password);\n\n            case 5:\n              token = _context.sent;\n              Cookies.set(\"token\", token, {\n                path: \"/\"\n              });\n              setState({\n                status: \"success\"\n              });\n              message.success(\"Logged in\");\n              router.push(\"/\", \"/\");\n              _context.next = 16;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](2);\n              setState({\n                status: \"error\",\n                error: _context.t0\n              });\n              message.error(_context.t0.message);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 12]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: css(_templateObject()),\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n        level: 4,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        layout: \"vertical\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Email\",\n          children: /*#__PURE__*/_jsxDEV(Controller, {\n            name: \"email\",\n            control: form.control,\n            rules: {\n              required: true\n            },\n            render: function render(_ref2) {\n              var value = _ref2.value,\n                  onChange = _ref2.onChange;\n              return /*#__PURE__*/_jsxDEV(Input, {\n                onChange: onChange,\n                placeholder: \"Email here\",\n                value: value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 17\n              }, _this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Password\",\n          children: /*#__PURE__*/_jsxDEV(Controller, {\n            name: \"password\",\n            control: form.control,\n            rules: {\n              required: true\n            },\n            render: function render(_ref3) {\n              var value = _ref3.value,\n                  onChange = _ref3.onChange;\n              return /*#__PURE__*/_jsxDEV(Input, {\n                onChange: onChange,\n                type: \"password\",\n                placeholder: \"Password here\",\n                value: value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 17\n              }, _this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            disabled: !form.formState.isValid || state.status === \"loading\",\n            onClick: handleSubmit,\n            type: \"primary\",\n            children: state.status === \"loading\" ? \"Logging in..\" : \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/register\",\n            as: \"/register\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"link\",\n              children: \"Register\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"sE4KkI3JJzNlLS1tQ4Z8zdhhHtI=\", false, function () {\n  return [useForm, useRouter];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/ryan/Documents/Project/feedloop-template/qoreXM/pages/login.tsx"],"names":["React","Cookies","css","Button","Card","Form","Input","message","Space","Typography","Controller","useForm","useRouter","client","Link","Login","form","defaultValues","email","password","mode","useState","status","state","setState","router","handleSubmit","useCallback","e","values","getValues","authenticate","token","set","path","success","push","error","control","required","value","onChange","formState","isValid"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Cookies from \"js-cookie\";\nimport { css } from \"@emotion/css\";\nimport { Button, Card, Form, Input, message, Space, Typography } from \"antd\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { useRouter } from \"next/router\";\nimport { client } from \"../qoreContext\";\nimport Link from \"next/link\";\n\nexport default function Login() {\n  const form = useForm<{ email: string; password: string }>({\n    defaultValues: { email: \"\", password: \"\" },\n    mode: \"onChange\",\n  });\n  const [state, setState] = React.useState<{\n    status: \"idle\" | \"loading\" | \"success\" | \"error\";\n    error?: Error;\n  }>({ status: \"idle\" });\n  const router = useRouter();\n  const handleSubmit = React.useCallback(\n    async (e: React.MouseEvent<HTMLButtonElement>) => {\n      const values = form.getValues();\n      setState({ status: \"loading\" });\n      try {\n        const token = await client.authenticate(values.email, values.password);\n        Cookies.set(\"token\", token, { path: \"/\" });\n        setState({ status: \"success\" });\n        message.success(\"Logged in\");\n        router.push(\"/\", \"/\");\n      } catch (error) {\n        setState({ status: \"error\", error });\n        message.error(error.message);\n      }\n    },\n    []\n  );\n  return (\n    <div\n      className={css`\n        margin: 100px auto;\n        width: 320px;\n      `}\n    >\n      <Card>\n        <Typography.Title level={4}>Login</Typography.Title>\n        <Form layout=\"vertical\">\n          <Form.Item label=\"Email\">\n            <Controller\n              name=\"email\"\n              control={form.control}\n              rules={{ required: true }}\n              render={({ value, onChange }) => (\n                <Input\n                  onChange={onChange}\n                  placeholder=\"Email here\"\n                  value={value}\n                />\n              )}\n            />\n          </Form.Item>\n          <Form.Item label=\"Password\">\n            <Controller\n              name=\"password\"\n              control={form.control}\n              rules={{ required: true }}\n              render={({ value, onChange }) => (\n                <Input\n                  onChange={onChange}\n                  type=\"password\"\n                  placeholder=\"Password here\"\n                  value={value}\n                />\n              )}\n            />\n          </Form.Item>\n        </Form>\n        <Form.Item>\n          <Space>\n            <Button\n              disabled={!form.formState.isValid || state.status === \"loading\"}\n              onClick={handleSubmit}\n              type=\"primary\"\n            >\n              {state.status === \"loading\" ? \"Logging in..\" : \"Login\"}\n            </Button>\n            <Link href=\"/register\" as=\"/register\">\n              <Button type=\"link\">Register</Button>\n            </Link>\n          </Space>\n        </Form.Item>\n      </Card>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}