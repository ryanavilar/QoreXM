{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport { client } from '../qoreContext';\n\nvar useCurrentUser = function useCurrentUser() {\n  _s();\n\n  /*\n  * waiting for implementation:\n  const currentMembers = qoreContext.views.currentMember.useListRow();\n  const user = React.useMemo(() => {\n   return currentMembers.data[0];\n  }, [currentMembers.data]);\n  */\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      user = _React$useState2[0],\n      setUser = _React$useState2[1];\n\n  React.useEffect(function () {\n    var _client$project$confi = client.project.config,\n        endpoint = _client$project$confi.endpoint,\n        organizationId = _client$project$confi.organizationId,\n        projectId = _client$project$confi.projectId;\n    client.project.axios.request({\n      baseURL: endpoint,\n      url: \"/orgs/\".concat(organizationId, \"/projects/\").concat(projectId, \"/me\"),\n      method: 'GET'\n    }).then(function (resp) {\n      setUser(resp.data.data);\n    });\n  }, []);\n  return user;\n};\n\n_s(useCurrentUser, \"hT6C72rcbfRUedrDq+TPaFfRI/M=\");\n\nexport default function Home() {\n  _s2();\n\n  var currentUser = useCurrentUser();\n  var router = useRouter();\n  React.useEffect(function () {\n    if (currentUser === null) {\n      router.push('/login');\n    }\n  }, []);\n}\n\n_s2(Home, \"PSraNYGR++9IPMl2UK6Us9b/CQw=\", false, function () {\n  return [useCurrentUser, useRouter];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/ryan/Documents/Project/feedloop-template/qoreXM/pages/index.tsx"],"names":["React","useRouter","client","useCurrentUser","useState","user","setUser","useEffect","project","config","endpoint","organizationId","projectId","axios","request","baseURL","url","method","then","resp","data","Home","currentUser","router","push"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,QAAwB,aAAxB;AAGA,SAAqBC,MAArB,QAAkC,gBAAlC;;AAGA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAAA;;AACzB;AACJ;AACA;AACA;AACA;AACA;AACA;AAP6B,wBAQDH,KAAK,CAACI,QAAN,EARC;AAAA;AAAA,MAQlBC,IARkB;AAAA,MAQZC,OARY;;AASzBN,EAAAA,KAAK,CAACO,SAAN,CAAgB,YAAM;AAAA,gCAC4BL,MAAM,CAACM,OAAP,CAAeC,MAD3C;AAAA,QACXC,QADW,yBACXA,QADW;AAAA,QACDC,cADC,yBACDA,cADC;AAAA,QACeC,SADf,yBACeA,SADf;AAElBV,IAAAA,MAAM,CAACM,OAAP,CAAeK,KAAf,CACKC,OADL,CACiE;AACzDC,MAAAA,OAAO,EAAEL,QADgD;AAEzDM,MAAAA,GAAG,kBAAWL,cAAX,uBAAsCC,SAAtC,QAFsD;AAGzDK,MAAAA,MAAM,EAAE;AAHiD,KADjE,EAMKC,IANL,CAMU,UAACC,IAAD,EAAU;AACZb,MAAAA,OAAO,CAACa,IAAI,CAACC,IAAL,CAAUA,IAAX,CAAP;AACH,KARL;AASH,GAXD,EAWG,EAXH;AAYA,SAAOf,IAAP;AACH,CAtBD;;GAAMF,c;;AAwBN,eAAe,SAASkB,IAAT,GAAgB;AAAA;;AAC3B,MAAMC,WAAW,GAAGnB,cAAc,EAAlC;AACA,MAAMoB,MAAM,GAAGtB,SAAS,EAAxB;AAEAD,EAAAA,KAAK,CAACO,SAAN,CAAgB,YAAM;AAClB,QAAIe,WAAW,KAAK,IAApB,EAA0B;AACtBC,MAAAA,MAAM,CAACC,IAAP,CAAY,QAAZ;AACH;AACJ,GAJD,EAIG,EAJH;AAKH;;IATuBH,I;UACAlB,c,EACLF,S;;;KAFKoB,I","sourcesContent":["import React from 'react';\nimport {useRouter} from 'next/router';\nimport {ProjectSchema} from '@feedloop/qore-client';\n\nimport qoreContext, {client} from '../qoreContext';\nimport LoggedIn from '../layouts/loggedin';\n\nconst useCurrentUser = () => {\n    /*\n  * waiting for implementation:\n   const currentMembers = qoreContext.views.currentMember.useListRow();\n   const user = React.useMemo(() => {\n     return currentMembers.data[0];\n   }, [currentMembers.data]);\n  */\n    const [user, setUser] = React.useState<ProjectSchema['memberDefaultView']['read'] | undefined>();\n    React.useEffect(() => {\n        const {endpoint, organizationId, projectId} = client.project.config;\n        client.project.axios\n            .request<{data: ProjectSchema['memberDefaultView']['read']}>({\n                baseURL: endpoint,\n                url: `/orgs/${organizationId}/projects/${projectId}/me`,\n                method: 'GET',\n            })\n            .then((resp) => {\n                setUser(resp.data.data);\n            });\n    }, []);\n    return user;\n};\n\nexport default function Home() {\n    const currentUser = useCurrentUser();\n    const router = useRouter();\n\n    React.useEffect(() => {\n        if (currentUser === null) {\n            router.push('/login');\n        }\n    }, []);\n}\n"]},"metadata":{},"sourceType":"module"}