"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UnauthorizedError = exports.callApi = void 0;
const tslib_1 = require("tslib");
const axios_1 = tslib_1.__importDefault(require("axios"));
axios_1.default.interceptors.response.use(data => data, error => {
    throw error;
});
axios_1.default.interceptors.request.use(config => {
    config.baseURL =
        process.env.QORE_SERVER || "https://stg-qore-app.qorebase.io";
    return config;
});
async function callApi(params, token) {
    const headers = {};
    if (token) {
        headers["Authorization"] = token;
    }
    return (await axios_1.default(Object.assign(Object.assign({}, params), { headers, url: params.url }))).data;
}
exports.callApi = callApi;
class UnauthorizedError extends Error {
}
exports.UnauthorizedError = UnauthorizedError;
