"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const prompts_1 = tslib_1.__importDefault(require("prompts"));
const nock_record_1 = require("nock-record");
const set_project_1 = tslib_1.__importDefault(require("./set-project"));
const config_1 = tslib_1.__importDefault(require("../config"));
const record = nock_record_1.setupRecorder();
describe("set-project", () => {
    beforeEach(() => {
        config_1.default.reset("org", "project", "token");
    });
    it("select project", async () => {
        process.env.QORE_SERVER =
            "https://p-qore-dot-pti-feedloop.et.r.appspot.com";
        const stdoutSpy = jest.spyOn(process.stdout, "write");
        prompts_1.default.inject(["mAQjA9ypixnsBDE", "U1tJvy7XhgOuVmI"]);
        const { completeRecording } = await record("set-project");
        await set_project_1.default.run([]);
        expect(stdoutSpy).toHaveBeenCalledWith("Successfully set project to Demo of the Org Demo organization\n");
        completeRecording();
    });
});
