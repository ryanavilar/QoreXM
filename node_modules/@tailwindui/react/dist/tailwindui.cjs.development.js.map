{"version":3,"file":"tailwindui.cjs.development.js","sources":["../src/hooks/use-id.ts","../src/hooks/use-is-initial-render.ts","../src/hooks/use-is-mounted.ts","../src/hooks/use-iso-morphic-effect.ts","../src/utils/match.ts","../src/utils/once.ts","../src/utils/disposables.ts","../src/components/transitions/utils/transition.ts","../src/components/transitions/transition.tsx"],"sourcesContent":["import * as React from 'react'\n\nlet id = 0\nfunction generateId() {\n  return ++id\n}\n\nexport function useId() {\n  const [id] = React.useState(generateId)\n  return id\n}\n","import * as React from 'react'\n\nexport function useIsInitialRender() {\n  const initial = React.useRef(true)\n\n  React.useEffect(() => {\n    initial.current = false\n  }, [])\n\n  return initial.current\n}\n","import * as React from 'react'\n\nexport function useIsMounted() {\n  const mounted = React.useRef(true)\n\n  React.useEffect(() => {\n    return () => {\n      mounted.current = false\n    }\n  }, [])\n\n  return mounted\n}\n","import * as React from 'react'\n\nexport const useIsoMorphicEffect =\n  typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect\n","export function match<TValue extends string | number = string, TReturnValue = unknown>(\n  value: TValue,\n  lookup: Record<TValue, TReturnValue | (() => TReturnValue)>\n): TReturnValue {\n  if (value in lookup) {\n    const returnValue = lookup[value]\n    return typeof returnValue === 'function' ? returnValue() : returnValue\n  }\n\n  const error = new Error(\n    `Tried to handle \"${value}\" but there is no handler defined. Only defined handlers are: ${Object.keys(\n      lookup\n    )\n      .map(key => `\"${key}\"`)\n      .join(', ')}.`\n  )\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(error, match)\n  }\n\n  throw error\n}\n","export function once<T>(cb: (...args: T[]) => void) {\n  const state = { called: false }\n\n  return (...args: T[]) => {\n    if (state.called) {\n      return\n    }\n    state.called = true\n    return cb(...args)\n  }\n}\n","type ArgumentsOf<F extends Function> = F extends (...args: infer A) => any ? A : never\n\nexport function disposables() {\n  const disposables: Function[] = []\n\n  const api = {\n    requestAnimationFrame(...args: ArgumentsOf<typeof requestAnimationFrame>) {\n      const raf = requestAnimationFrame(...args)\n      api.add(() => cancelAnimationFrame(raf))\n    },\n\n    nextFrame(...args: ArgumentsOf<typeof requestAnimationFrame>) {\n      api.requestAnimationFrame(() => {\n        api.requestAnimationFrame(...args)\n      })\n    },\n\n    setTimeout(...args: ArgumentsOf<typeof setTimeout>) {\n      const timer = setTimeout(...args)\n      api.add(() => clearTimeout(timer))\n    },\n\n    add(cb: () => void) {\n      disposables.push(cb)\n    },\n\n    dispose() {\n      disposables.splice(0).forEach(dispose => dispose())\n    },\n  }\n\n  return api\n}\n","import { once } from '../../../utils/once'\nimport { disposables } from '../../../utils/disposables'\n\nfunction addClasses(node: HTMLElement, ...classes: string[]) {\n  node && classes.length > 0 && node.classList.add(...classes)\n}\n\nfunction removeClasses(node: HTMLElement, ...classes: string[]) {\n  node && classes.length > 0 && node.classList.remove(...classes)\n}\n\nexport enum Reason {\n  Finished = 'finished',\n  Cancelled = 'cancelled',\n}\n\nfunction waitForTransition(node: HTMLElement, done: (reason: Reason) => void) {\n  const d = disposables()\n\n  if (!node) return d.dispose\n\n  // Safari returns a comma separated list of values, so let's sort them and take the highest value.\n  const { transitionDuration, transitionDelay } = getComputedStyle(node)\n\n  const [durationMs, delaysMs] = [transitionDuration, transitionDelay].map(value => {\n    const [resolvedValue = 0] = value\n      .split(',')\n      // Remove falseys we can't work with\n      .filter(Boolean)\n      // Values are returned as `0.3s` or `75ms`\n      .map(v => (v.includes('ms') ? parseFloat(v) : parseFloat(v) * 1000))\n      .sort((a, z) => z - a)\n\n    return resolvedValue\n  })\n\n  // Waiting for the transition to end. We could use the `transitionend` event, however when no\n  // actual transition/duration is defined then the `transitionend` event is not fired.\n  //\n  // TODO: Downside is, when you slow down transitions via devtools this timeout is still using the\n  // full 100% speed instead of the 25% or 10%.\n  if (durationMs !== 0) {\n    d.setTimeout(() => {\n      done(Reason.Finished)\n    }, durationMs + delaysMs)\n  } else {\n    // No transition is happening, so we should cleanup already. Otherwise we have to wait until we\n    // get disposed.\n    done(Reason.Finished)\n  }\n\n  // If we get disposed before the timeout runs we should cleanup anyway\n  d.add(() => done(Reason.Cancelled))\n\n  return d.dispose\n}\n\nexport function transition(\n  node: HTMLElement,\n  base: string[],\n  from: string[],\n  to: string[],\n  done?: (reason: Reason) => void\n) {\n  const d = disposables()\n  const _done = done !== undefined ? once(done) : () => {}\n\n  addClasses(node, ...base, ...from)\n\n  d.nextFrame(() => {\n    removeClasses(node, ...from)\n    addClasses(node, ...to)\n\n    d.add(\n      waitForTransition(node, reason => {\n        removeClasses(node, ...to, ...base)\n        return _done(reason)\n      })\n    )\n  })\n\n  // Once we get disposed, we should ensure that we cleanup after ourselves. In case of an unmount,\n  // the node itself will be nullified and will be a no-op. In case of a full transition the classes\n  // are already removed which is also a no-op. However if you go from enter -> leave mid-transition\n  // then we have some leftovers that should be cleaned.\n  d.add(() => removeClasses(node, ...base, ...from, ...to))\n\n  // When we get disposed early, than we should also call the done method but switch the reason.\n  d.add(() => _done(Reason.Cancelled))\n\n  return d.dispose\n}\n","import * as React from 'react'\n\nimport { useId } from '../../hooks/use-id'\nimport { useIsInitialRender } from '../../hooks/use-is-initial-render'\nimport { useIsMounted } from '../../hooks/use-is-mounted'\nimport { useIsoMorphicEffect } from '../../hooks/use-iso-morphic-effect'\n\nimport { match } from '../../utils/match'\nimport { Reason, transition } from './utils/transition'\n\ntype ID = number\n\nfunction useSplitClasses(classes: string = '') {\n  return React.useMemo(() => classes.split(' ').filter(className => className.trim().length > 1), [\n    classes,\n  ])\n}\n\ntype TransitionContextValues = {\n  show: boolean\n  appear: boolean\n} | null\nconst TransitionContext = React.createContext<TransitionContextValues>(null)\n\nenum TreeStates {\n  Visible = 'visible',\n  Hidden = 'hidden',\n}\n\ntype TransitionClasses = Partial<{\n  enter: string\n  enterFrom: string\n  enterTo: string\n  leave: string\n  leaveFrom: string\n  leaveTo: string\n}>\n\ntype HTMlTags = keyof JSX.IntrinsicElements\ntype HTMLTagProps<TTag extends HTMlTags> = JSX.IntrinsicElements[TTag]\n\ntype AsShortcut<TTag extends HTMlTags> = {\n  children: React.ReactNode\n  as?: TTag\n} & Omit<HTMLTagProps<TTag>, 'ref'>\n\ntype AsRenderPropFunction = {\n  children: (ref: React.MutableRefObject<any>) => JSX.Element\n}\n\ntype BaseConfig = Partial<{ appear: boolean }>\n\ntype TransitionChildProps<TTag extends HTMlTags> = BaseConfig &\n  (AsShortcut<TTag> | AsRenderPropFunction) &\n  TransitionClasses\n\nfunction useTransitionContext() {\n  const context = React.useContext(TransitionContext)\n\n  if (context === null) {\n    throw new Error('A <Transition.Child /> is used but it is missing a parent <Transition />.')\n  }\n\n  return context\n}\n\nfunction useParentNesting() {\n  const context = React.useContext(NestingContext)\n\n  if (context === null) {\n    throw new Error('A <Transition.Child /> is used but it is missing a parent <Transition />.')\n  }\n\n  return context\n}\n\ntype NestingContextValues = {\n  children: React.MutableRefObject<ID[]>\n  register: (id: ID) => () => void\n  unregister: (id: ID) => void\n}\n\nconst NestingContext = React.createContext<NestingContextValues | null>(null)\n\nfunction useNesting(done?: () => void) {\n  const transitionableChildren = React.useRef<ID[]>([])\n  const mounted = useIsMounted()\n\n  const unregister = React.useCallback(\n    (childId: ID) => {\n      const idx = transitionableChildren.current.indexOf(childId)\n\n      if (idx === -1) return\n\n      transitionableChildren.current.splice(idx, 1)\n\n      if (transitionableChildren.current.length <= 0 && mounted.current) {\n        done?.()\n      }\n    },\n    [done, mounted, transitionableChildren]\n  )\n\n  const register = React.useCallback(\n    (childId: ID) => {\n      transitionableChildren.current.push(childId)\n      return () => unregister(childId)\n    },\n    [transitionableChildren, unregister]\n  )\n\n  return React.useMemo(\n    () => ({\n      children: transitionableChildren,\n      register,\n      unregister,\n    }),\n    [register, unregister, transitionableChildren]\n  )\n}\n\nfunction TransitionChild<TTag extends HTMlTags = 'div'>(props: TransitionChildProps<TTag>) {\n  const { children, enter, enterFrom, enterTo, leave, leaveFrom, leaveTo, ...rest } = props\n  const container = React.useRef<HTMLElement | null>(null)\n  const [state, setState] = React.useState(TreeStates.Visible)\n\n  const { show, appear } = useTransitionContext()\n  const { register, unregister } = useParentNesting()\n\n  const initial = useIsInitialRender()\n  const id = useId()\n\n  const isTransitioning = React.useRef(false)\n\n  const nesting = useNesting(\n    React.useCallback(() => {\n      // When all children have been unmounted we can only hide ourselves if and only if we are not\n      // transitioning ourserlves. Otherwise we would unmount before the transitions are finished.\n      if (!isTransitioning.current) {\n        setState(TreeStates.Hidden)\n        unregister(id)\n      }\n    }, [id, unregister, isTransitioning])\n  )\n\n  useIsoMorphicEffect(() => register(id), [register, id])\n\n  const enterClasses = useSplitClasses(enter)\n  const enterFromClasses = useSplitClasses(enterFrom)\n  const enterToClasses = useSplitClasses(enterTo)\n\n  const leaveClasses = useSplitClasses(leave)\n  const leaveFromClasses = useSplitClasses(leaveFrom)\n  const leaveToClasses = useSplitClasses(leaveTo)\n\n  React.useEffect(() => {\n    if (state === TreeStates.Visible && container.current === null) {\n      throw new Error('Did you forget to passthrough the `ref` to the actual DOM node?')\n    }\n  }, [container, state])\n\n  useIsoMorphicEffect(() => {\n    const node = container.current\n\n    if (!node) return\n\n    // Skipping initial transition\n    if (initial && !appear) return\n\n    isTransitioning.current = true\n\n    return show\n      ? transition(node, enterClasses, enterFromClasses, enterToClasses, () => {\n          isTransitioning.current = false\n        })\n      : transition(node, leaveClasses, leaveFromClasses, leaveToClasses, reason => {\n          isTransitioning.current = false\n\n          if (reason !== Reason.Finished) return\n\n          // When we don't have children anymore we can safely unregister from the parent and hide\n          // ourselves.\n          if (nesting.children.current.length <= 0) {\n            setState(TreeStates.Hidden)\n            unregister(id)\n          }\n        })\n  }, [\n    id,\n    isTransitioning,\n    unregister,\n    nesting,\n    container,\n    initial,\n    appear,\n    show,\n    enterClasses,\n    enterFromClasses,\n    enterToClasses,\n    leaveClasses,\n    leaveFromClasses,\n    leaveToClasses,\n  ])\n\n  // Unmount the whole tree\n  if (state === TreeStates.Hidden) return null\n\n  if (typeof children === 'function') {\n    return (\n      <NestingContext.Provider value={nesting}>\n        {(children as AsRenderPropFunction['children'])(container)}\n      </NestingContext.Provider>\n    )\n  }\n\n  const { as: Component = 'div', ...passthroughProps } = rest as AsShortcut<TTag>\n  return (\n    <NestingContext.Provider value={nesting}>\n      {/* @ts-expect-error Expression produces a union type that is too complex to represent. */}\n      <Component {...passthroughProps} ref={container}>\n        {children}\n      </Component>\n    </NestingContext.Provider>\n  )\n}\n\nexport function Transition<TTag extends HTMlTags = 'div'>(\n  props: TransitionChildProps<TTag> & { show: boolean; appear?: boolean }\n) {\n  const { show, appear = false, ...rest } = props\n\n  if (![true, false].includes(show)) {\n    throw new Error('A <Transition /> is used but it is missing a `show={true | false}` prop.')\n  }\n\n  const [state, setState] = React.useState(show ? TreeStates.Visible : TreeStates.Hidden)\n\n  const nestingBag = useNesting(\n    React.useCallback(() => {\n      setState(TreeStates.Hidden)\n    }, [])\n  )\n\n  const initial = useIsInitialRender()\n  const transitionBag = React.useMemo<TransitionContextValues>(\n    () => ({ show, appear: appear || !initial }),\n    [show, appear, initial]\n  )\n\n  React.useEffect(() => {\n    if (show) {\n      setState(TreeStates.Visible)\n    } else if (nestingBag.children.current.length <= 0) {\n      setState(TreeStates.Hidden)\n    }\n  }, [show, nestingBag])\n\n  return (\n    <NestingContext.Provider value={nestingBag}>\n      <TransitionContext.Provider value={transitionBag}>\n        {match(state, {\n          [TreeStates.Visible]: () => <TransitionChild {...rest} />,\n          [TreeStates.Hidden]: null,\n        })}\n      </TransitionContext.Provider>\n    </NestingContext.Provider>\n  )\n}\n\nTransition.Child = TransitionChild\n"],"names":["id","generateId","useId","React","useIsInitialRender","initial","current","useIsMounted","mounted","useIsoMorphicEffect","window","match","value","lookup","returnValue","error","Error","Object","keys","map","key","join","captureStackTrace","once","cb","state","called","disposables","api","requestAnimationFrame","raf","add","cancelAnimationFrame","nextFrame","args","setTimeout","timer","clearTimeout","push","dispose","splice","forEach","addClasses","node","classes","length","classList","removeClasses","remove","Reason","waitForTransition","done","d","getComputedStyle","transitionDuration","transitionDelay","split","filter","Boolean","v","includes","parseFloat","sort","a","z","resolvedValue","durationMs","delaysMs","Finished","Cancelled","transition","base","from","to","_done","undefined","reason","useSplitClasses","className","trim","TransitionContext","TreeStates","useTransitionContext","context","useParentNesting","NestingContext","useNesting","transitionableChildren","unregister","childId","idx","indexOf","register","children","TransitionChild","props","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","rest","container","Visible","setState","show","appear","isTransitioning","nesting","Hidden","enterClasses","enterFromClasses","enterToClasses","leaveClasses","leaveFromClasses","leaveToClasses","Provider","as","Component","passthroughProps","ref","Transition","nestingBag","transitionBag","Child"],"mappings":"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"}